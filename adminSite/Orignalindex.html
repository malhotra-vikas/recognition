<!DOCTYPE html>
<html>
<head>
    <title>Events Page</title>
    <style>
        table {
            width: 80%;
            border-collapse: collapse;
            margin: 20px auto;
        }
        th, td {
            padding: 8px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
    </style>
</head>
<body>
    <h1>Events Page</h1>

    <h2>Create New Event</h2>
    <form id="eventForm">
        <label for="eventName">Event Name:</label>
        <input type="text" id="eventName" name="eventName" required>
        <input type="submit" value="Create Event">
    </form>

    <h2>Current Events</h2>
    <table>
        <thead>
            <tr>
                <th>Event Name</th>
            </tr>
        </thead>
        <tbody id="eventList">
            <!-- Existing events will be displayed here -->
        </tbody>
    </table>


    <script src="https://cdnjs.cloudflare.com/ajax/libs/aws-sdk/2.1152.0/aws-sdk.min.js"></script>
    <script>
        // Initialize AWS SDK
        AWS.config.region = 'us-east-2'; // Replace with your desired region

        var sts = new AWS.STS();
        sts.assumeRole({
            RoleArn: 'arn:aws:iam::018701121298:role/RecognitionWebAccessRole',
            RoleSessionName: 'webapp-session'
        }, function(err, data) {
        	if (err) {
                console.error("Error:", err);
            } else {
                // Temporary credentials
                AWS.config.credentials = new AWS.Credentials(
                    data.Credentials.AccessKeyId,
                    data.Credentials.SecretAccessKey,
                    data.Credentials.SessionToken
                );

                // Now you can use these credentials to access AWS services
                var dynamodb = new AWS.DynamoDB();
                var params = {
                    TableName: 'events'
                    // Add other parameters for your DynamoDB operation
                };

                dynamodb.scan(params, function(err, data) {
                    if (err) {
                        console.error("Error:", err);
                    } else {
                        console.log("Data:", data);
                        var existingEvents = data.Items.map(function(item) {
                            return item.eventName;
                        });

                        var eventList = document.getElementById("eventList");

                        // Populate the table with existing events
                        for (var i = 0; i < existingEvents.length; i++) {
                            var eventRow = document.createElement("tr");
                            var eventNameCell = document.createElement("td");
                            eventNameCell.textContent = existingEvents[i];
                            eventRow.appendChild(eventNameCell);
                            eventList.appendChild(eventRow);
                        }
                    }
                }); 
            }
        });

       
        // JavaScript to handle form submission
        document.getElementById("eventForm").addEventListener("submit", function (e) {
            e.preventDefault();

            // Get the event name from the input field
            var eventName = document.getElementById("eventName").value;

            // Create an object to store event data (you can modify this as needed)
            var eventData = {
                eventName: eventName
            };

            // Log the data to the console (you can replace with your saving logic)
            console.log("New Event Data:", eventData);

            // Add the new event to the table (for demonstration purposes)
            var eventList = document.getElementById("eventList");
            var eventRow = document.createElement("tr");
            var eventNameCell = document.createElement("td");
            eventNameCell.textContent = eventName;
            eventRow.appendChild(eventNameCell);
            eventList.appendChild(eventRow);

            // Clear the input field
            document.getElementById("eventName").value = "";
        });
    </script>
</body>
</html>
